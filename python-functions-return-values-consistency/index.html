<!DOCTYPE html>
<html lang="en"  class="theme--light" >

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://rmariano.eu/images/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://rmariano.eu/images/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://rmariano.eu/images/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://rmariano.eu/images/apple-touch-icon-57x57.png" />
  <link rel="short icon" href="https://rmariano.eu/images/favicon.png" type="image/x-icon" />
  <link rel="stylesheet" href="https://rmariano.eu/style.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" rel="stylesheet">
  <title>IT Arch â€¢ On returning consistent data types</title>
  
  
  
</head>

<body>
  <div id="sidebar" class="animated fadeInDown">
    <div class="logo-title">
      <div class="title">
        <img src=https://rmariano.eu/images/logo@2x.png style="width:127px;" alt="logo" />
        <h3><a href="https://rmariano.eu/">IT Arch</a></h3>
        <div class="description">
          <p>A blog about software engineering.</p>
        </div>
      </div>
    </div>
    <ul class="social-links"><li><a href="https://github.com/rmariano" aria-label="Go to Github profile page"><i class="fab fa-github"></i></a></li><li><a href="https://gitlab.com/rmariano" aria-label="Go to Gitlab profile page"><i class="fab fa-gitlab"></i></a></li><li><a href="https://twitter.com/rmarianoa" aria-label="Go to Twitter profile page"><i class="fab fa-twitter"></i></a></li>
      
    </ul>
  </div>
  <div id="main">
    <div class="page-top animated fadeInDown">
      <div class="nav">
        
        
        
        
        <li><a  href="https://rmariano.eu/">Home</a></li>
        <li><a  href="https://rmariano.eu/about/">About</a></li><li><a  href="https://rmariano.eu/tags">Tags</a></li><li><a 
            href="https://rmariano.eu/archive/">Archive</a></li></div>
      <div class="information">
        <div class="back_btn">
          <a onclick="window.history.go(-1)" ><i
              class="fas fa-chevron-left"></i></a>
        </div>
        
        
        
        <div class="avatar"><img src="https://rmariano.eu/images/avatar.jpg"></div>
      </div>
    </div>
    <div class="autopagerize_page_element">
      <div class="content">
        
<article class="post animated fadeInDown">
  <h1><a href="https:&#x2F;&#x2F;rmariano.eu&#x2F;python-functions-return-values-consistency&#x2F;">On returning consistent data types</a></h1>
  
  <div class="post-content"><p>This post is inspired on an issue I once found, while I was using a
well-known library in Python for parsing YAML files. The problem was
that when it was loading the content of the file, the result was not
coherent, because sometimes it returned the content as a python
<strong>dict</strong>, but if the file was empty, the return value was <strong>None</strong>.</p>
<p>Do you notice something odd here?</p>
<p>What if I want to use the result? I cannot do it safely, for example:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>content = yaml.</span><span style="color:#bf616a;">load</span><span>(</span><span style="color:#d08770;">...</span><span>)  </span><span style="color:#65737e;"># with the correct parameters and file name
</span><span style="color:#b48ead;">for </span><span>tag, values </span><span style="color:#b48ead;">in </span><span>content.</span><span style="color:#bf616a;">items</span><span>():
</span><span>    </span><span style="color:#b48ead;">pass  </span><span style="color:#65737e;"># process as required...
</span></code></pre>
<p>If content is <code>None</code>, it will raise an <code>AttributeError</code> saying that None
has no attribute called &quot;items&quot; (which is true).</p>
<p>Therefore, the developer should catch the exception or avoid the corner
case, by doing something like the following:</p>
<pre data-lang="python" style="background-color:#2b303b;color:#c0c5ce;" class="language-python "><code class="language-python" data-lang="python"><span>content = yaml.</span><span style="color:#bf616a;">load</span><span>() or {}
</span></code></pre>
<p>That could be a case of &quot;coding defensively&quot;, making sure that the
program will not fail under most conditions (it would also require to
add an <code>assert</code> or to raise an exception perhaps, but that is a
different topic). I actually agree with defensive programming, but I
think it is better if the library itself has a more correct behaviour,
respecting the interface (that is: if you are going to return a
dictionary, and there is not content, then the logical assumption is to
expect an empty dictionary). This must be the default behaviour, not
something to be set by parameters.</p>
<p>This could be thought as an instance of a more general problem that
occurs when some function is intended to return &quot;X or Y&quot;. In my
opinion, if X and Y do not share the same interface, there is a
potential bug (in the Object-Oriented paradigm we would say that there
is no polymorphism, or maybe that the &quot;contract&quot; is not being
respected).</p>
<p>This is an example that I wanted to highlight, because it might help you
to write cleaner code.</p>
</div>
  <div class="post-footer">
    <div class="meta">
      <div class="info">
        
        <i class="far fa-sun"></i><span class="date">Sun Jun 08, 2014 15:46:09 +0300</span>
        
        
        <i class="fas fa-tags"></i>
        
        <a class="tag" href="https://rmariano.eu/tags/best-practices">&nbsp;best-practices</a>
        
        <a class="tag" href="https://rmariano.eu/tags/python">&nbsp;python</a>
        
        <a class="tag" href="https://rmariano.eu/tags/development">&nbsp;development</a>
        
        <a class="tag" href="https://rmariano.eu/tags/yaml">&nbsp;yaml</a>
        
        
      </div>
    </div>
  </div>
</article>
<div class="share">
  <div class="twitter">
    <a class="fab fa-twitter"
      href="http://twitter.com/share?text=On returning consistent data types&url=https:&#x2F;&#x2F;rmariano.eu&#x2F;python-functions-return-values-consistency&#x2F;&hashtags=best-practices,python,development,yaml"></a>
  </div>
</div>










      </div>
    </div>
  </div>
  
  <script>
    function showLanguages() {
      let currentDisplay = document.getElementById("languages").style.display;
      if (currentDisplay == 'none') {
        document.getElementById("languages").style.display = 'block';
      } else {
        document.getElementById("languages").style.display = 'none';
      }
    }
  </script>
</body>

</html>
